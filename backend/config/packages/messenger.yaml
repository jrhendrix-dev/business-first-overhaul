framework:
    messenger:
        enabled: true

        transports:
            async:
                dsn: '%env(MESSENGER_TRANSPORT_DSN)%'
                options: { table_name: messenger_messages }
                retry_strategy: { max_retries: 3, delay: 1000 }

            failed:
                dsn: 'doctrine://default?queue_name=failed'
                options: { table_name: messenger_failed }

        failure_transport: failed

        routing:
            # BOTH messages are routed to the async transport
            'App\Message\EmailChangeConfirmMessage': async
            'App\Message\EmailChangeNotifyOldMessage': async
